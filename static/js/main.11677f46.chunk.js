(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{132:function(e,t,a){e.exports=a.p+"static/media/user.7de5e5f7.svg"},133:function(e,t,a){e.exports=a.p+"static/media/users.08be9bce.svg"},134:function(e,t,a){e.exports=a.p+"static/media/dialog.27d2bb2e.svg"},135:function(e,t,a){e.exports=a.p+"static/media/logout.4a8937d8.svg"},136:function(e,t,a){e.exports=a.p+"static/media/preloader.35d5736d.gif"},137:function(e,t,a){e.exports={profCont:"profile_profCont__3DNeE"}},138:function(e,t,a){e.exports=a.p+"static/media/my_ava.b07ea12e.jpg"},16:function(e,t,a){e.exports={user:"profileInfo_user__2oG7Q",user__nameBlock:"profileInfo_user__nameBlock__3wmp0",user__nameBlock__name:"profileInfo_user__nameBlock__name__2JjoH",user__photoBlock:"profileInfo_user__photoBlock__2qTYd",user__photoBlock__photo:"profileInfo_user__photoBlock__photo__9TVAa",user__photoBlock__changePhoto:"profileInfo_user__photoBlock__changePhoto__K1L48",inputAddPhoto:"profileInfo_inputAddPhoto__3aVJs",user__info:"profileInfo_user__info__6D54m",input:"profileInfo_input__3Fe4G",statusBlock:"profileInfo_statusBlock__2R-qi",statusBlock__changeStatus:"profileInfo_statusBlock__changeStatus__SKstG",statusBlock__status:"profileInfo_statusBlock__status__1g2Z6"}},165:function(e,t,a){e.exports=a(292)},168:function(e,t,a){},20:function(e,t,a){e.exports={pageS:"users_pageS__2Rs22",page:"users_page__h1cAq",pageSwitch:"users_pageSwitch__3oIdd",changePage:"users_changePage__3M_kF",usersPage:"users_usersPage__2GpcK",totalPage:"users_totalPage__37Rmw",usersBlock:"users_usersBlock__YZTb0",user:"users_user__qh56n"}},29:function(e,t,a){e.exports={Dialogs:"dialogs_Dialogs__2ghCp",dialogsNames:"dialogs_dialogsNames__QfNnY",active:"dialogs_active__mIKUF",Messages:"dialogs_Messages__1g32C",communicationBlock:"dialogs_communicationBlock__1xBEO",textarea:"dialogs_textarea__8Nb7A",btnadd:"dialogs_btnadd__1HzsL"}},292:function(e,t,a){"use strict";a.r(t);a(166),a(168),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(6),r=a(44),o=a(4),s=a(293),c={newMessage:"",dialogsData:[{dialogsId:Object(s.a)(),name:"Miroliub"},{dialogsId:Object(s.a)(),name:"Ratibor"},{dialogsId:Object(s.a)(),name:"Inokentii`"},{dialogsId:Object(s.a)(),name:"Iziaslav"},{dialogsId:Object(s.a)(),name:"Iziaslav"}],messagesData:[{messageId:Object(s.a)(),message:"Hi"},{messageId:Object(s.a)(),message:"My parents gave me a very difficult name"},{messageId:Object(s.a)(),message:"True?)"}]},i=a(10),u=a.n(i),l=a(14),m=a(128),p=a.n(m).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"7356db4d-2dd5-4272-8da5-db03322fb687"}}),f=function(e,t){return p.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},d=function(e){return p.delete("follow/".concat(e)).then((function(e){return e.data}))},g=function(e){return p.post("follow/".concat(e)).then((function(e){return e.data}))},_=function(){return p.get("auth/me").then((function(e){return e.data}))},h=function(e,t,a){return p.post("auth/login",{email:e,password:t,rememberMe:a}).then((function(e){return e.data}))},E=function(){return p.delete("auth/login").then((function(e){return e.data}))},b=function(e){return p.get("profile/"+e).then((function(e){return e.data}))},v=function(e){return p.get("profile/status/"+e).then((function(e){return e.data}))},O=function(e){return p.put("profile/status",e).then((function(e){return e.data}))},P=function(e){var t=new FormData;return t.append("image",e),p.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e}))},j={newPost:"",postData:[{idPost:"1",post:"It`s my first post"},{idPost:"2",post:"I don`t have coronavirus"},{idPost:"3",post:"React it is a power\ud83d\ude80"}],profile:null,profileStatus:""},S=function(e){return{type:"SET_USER_PROFILE",profile:e}},k=function(e){return{type:"SET_PROFILE_STATUS",profileStatus:e}},w=function(e){return{type:"SET_PHOTO_PROFILE",photoProfile:e}},C=function(e,t,a,n){return e.map((function(e){return e[a]===t?Object(o.a)(Object(o.a)({},e),n):e}))},y={items:[],pageSize:8,totalCount:0,currentPage:1,isFetching:!1,isFinished:[]},I=function(e){return{type:"FOLLOW",userID:e}},N=function(e){return{type:"UNFOLLOW",userID:e}},F=function(e){return{type:"SET_IS_FETCH",isFetch:e}},x=function(e,t){return{type:"SET_FOLLOWING_PROGRESS",isFetch:e,userId:t}},T=function(){var e=Object(l.a)(u.a.mark((function e(t,a,n,r){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x(!0,a)),e.next=3,n;case 3:o=e.sent,t(x(!1,a)),0===o.resultCode&&t(r(a));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),U=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T(a,e,d(e),N);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:T(a,e,g(e),I);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},B=a(36),A={id:null,login:null,email:null,isAuth:!1},L=function(e,t,a,n){return{type:"SET_USER_DATA",data:{id:e,login:t,email:a,isAuth:n}}},R=function(){return function(){var e=Object(l.a)(u.a.mark((function e(t){var a,n,r,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:0===(a=e.sent).resultCode&&(n=a.data,r=n.id,o=n.login,s=n.email,t(L(r,o,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},M=a(129),z=a(127),H={initialized:!1},G=Object(n.c)({dialogPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-MESSAGE":var a={messageId:Object(s.a)(),message:t.newMessageText};return Object(o.a)(Object(o.a)({},e),{},{messagesData:[].concat(Object(r.a)(e.messagesData),[a])});default:return e}},profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var a={idPost:Object(s.a)(),post:t.post};return Object(o.a)(Object(o.a)({},e),{},{postData:[a].concat(Object(r.a)(e.postData))});case"SET_USER_PROFILE":return Object(o.a)(Object(o.a)({},e),{},{profile:t.profile});case"SET_PROFILE_STATUS":return Object(o.a)(Object(o.a)({},e),{},{profileStatus:t.profileStatus});case"SET_PHOTO_PROFILE":return Object(o.a)(Object(o.a)({},e),{},{profile:e.profile?Object(o.a)(Object(o.a)({},e.profile),{},{photos:t.photoProfile}):null});case"DELETE_POST":return Object(o.a)(Object(o.a)({},e),{},{postData:e.postData.filter((function(e){return e.idPost!==t.postId}))});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(o.a)(Object(o.a)({},e),{},{items:C(e.items,t.userID,"id",{followed:!0})});case"UNFOLLOW":return Object(o.a)(Object(o.a)({},e),{},{items:C(e.items,t.userID,"id",{followed:!1})});case"SET_USERS":return Object(o.a)(Object(o.a)({},e),{},{items:t.items});case"SET_CURRENT_PAGE":return Object(o.a)(Object(o.a)({},e),{},{currentPage:t.currentPage});case"SET_USERS_COUNT":return Object(o.a)(Object(o.a)({},e),{},{totalCount:t.totalCount});case"SET_IS_FETCH":return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetch});case"SET_FOLLOWING_PROGRESS":return Object(o.a)(Object(o.a)({},e),{},{isFinished:t.isFetch?[].concat(Object(r.a)(e.isFinished),[t.userId]):e.isFinished.filter((function(e){return e!==t.userId}))});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(o.a)(Object(o.a)({},e),t.data);default:return e}},form:z.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCEED":return Object(o.a)(Object(o.a)({},e),{},{initialized:!0});default:return e}}}),W=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||n.d,K=Object(n.e)(G,W(Object(n.a)(M.a)));window.store=K;var V=a(67),Y=a.n(V),q=a(38),J=a(39),Z=a(45),Q=a(43),X=a(0),$=a.n(X),ee=a(34),te=a.n(ee),ae=a(30),ne=a.n(ae),re=a(11),oe=a(12),se=a(7),ce=a(132),ie=a.n(ce),ue=a(133),le=a.n(ue),me=a(134),pe=a.n(me),fe=a(135),de=a.n(fe);function ge(){var e=Object(se.d)((function(e){return e.data.id})),t=Object(se.d)((function(e){var t;return null===(t=e.profilePage.profile)||void 0===t?void 0:t.userId})),a=Object(se.d)((function(e){return e.data.isAuth})),n=Object(re.f)(),r=Object(se.c)();return $.a.createElement("div",{className:ne.a.nav},$.a.createElement("div",null,$.a.createElement(oe.b,{activeClassName:e===t?ne.a.activeHover:"",className:ne.a.activeClick,to:"/profile"},$.a.createElement("img",{src:ie.a,alt:"user"}),"My profile")),$.a.createElement("div",null,$.a.createElement(oe.b,{activeClassName:ne.a.activeHover,className:ne.a.activeClick,to:"/dialogs"},$.a.createElement("img",{src:pe.a,alt:"user"}),"Dialogs")),$.a.createElement("div",null,$.a.createElement(oe.b,{activeClassName:ne.a.activeHover,className:ne.a.activeClick,to:"/users"},$.a.createElement("img",{src:le.a,alt:"user"}),"Users")),a&&$.a.createElement("a",{style:{justifySelf:"end"},onClick:function(){r(function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:0===e.sent.resultCode&&t(L(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.push("login")}},$.a.createElement("img",{style:{paddingLeft:"5px"},src:de.a,alt:"logout"}),"Log out"))}var _e=a(136),he=a.n(_e),Ee=function(){return $.a.createElement("div",{style:{position:"absolute",top:"40%",left:"35%"}},$.a.createElement("img",{src:he.a,alt:"preloader",style:{width:"500px"}}))},be=a(137),ve=a.n(be),Oe=a(70),Pe=a.n(Oe),je=a(16),Se=a.n(je),ke=a(57),we=$.a.memo((function(e){var t=Object(X.useState)(!1),a=Object(ke.a)(t,2),n=a[0],r=a[1],o=Object(X.useState)(""),s=Object(ke.a)(o,2),c=s[0],i=s[1],u=Object(se.c)();Object(X.useEffect)((function(){i(e.profileStatus)}),[e.profileStatus]);var l=function(){u(k(c||"")),e.updateProfileStatus({status:c}),r(!1)};return $.a.createElement("div",{className:Se.a.statusBlock},n&&!e.currentUserId?$.a.createElement("div",{className:Se.a.statusBlock__changeStatus},$.a.createElement("input",{className:Se.a.input,onChange:function(e){i(e.currentTarget.value)},autoFocus:!0,placeholder:"Fix it",onKeyPress:function(e){"Enter"===e.key&&l()},value:null===c||""===c?"":c}),$.a.createElement("button",{onClick:l},"\u21b2"),$.a.createElement("button",{onClick:function(){i(e.profileStatus),r(!1)}},"\u0425")):$.a.createElement("div",{className:Se.a.statusBlock__status,onDoubleClick:function(){return r(!0)}}," ",$.a.createElement("span",null,null===c||""===c?$.a.createElement("div",null,$.a.createElement("span",null," User has`t status.")):c)))})),Ce=$.a.memo((function(e){var t=e.user&&e.user.id||0;return $.a.createElement("div",null,e.user&&e.user.followed?$.a.createElement("button",{disabled:e.isFinished.some((function(e){return e===t})),onClick:function(){e.getUnFollow(t)}},"Unfollow"):$.a.createElement("button",{disabled:e.isFinished.some((function(e){return e===t})),onClick:function(){e.getFollow(t)}},"Follow"))}));var ye=$.a.memo((function(e){var t=Object(re.f)();if(!e.profile)return $.a.createElement(Ee,null);var a=e.profile.photos.large?e.profile.photos.large:Pe.a,n=e.usersPage.find((function(t){return t.id===e.currentUserId}));return $.a.createElement("div",null,$.a.createElement("div",{className:Se.a.user},$.a.createElement("div",{className:Se.a.user__photoBlock},$.a.createElement("img",{className:Se.a.user__photoBlock__photo,src:a,alt:"imgAny"}),!e.currentUserId&&$.a.createElement("label",{className:Se.a.user__photoBlock__changePhoto},"\u2795",$.a.createElement("input",{type:"file",className:Se.a.inputAddPhoto,onChange:function(t){return function(t){e.savePhotoProfile(t)}(t.target.files[0])}}))||$.a.createElement($.a.Fragment,null,$.a.createElement(Ce,{getUnFollow:e.getUnFollow,getFollow:e.getFollow,user:n,isFinished:e.isFinished}),$.a.createElement("button",{onClick:t.goBack},"\u21a2 go back"))),$.a.createElement("div",null,$.a.createElement("div",{className:Se.a.user__nameBlock},$.a.createElement("span",{className:Se.a.user__nameBlock__name},e.profile.fullName),$.a.createElement(we,{profileStatus:e.profileStatus,currentUserId:e.currentUserId,updateProfileStatus:e.updateProfileStatus})),$.a.createElement("div",{className:Se.a.user__info},$.a.createElement("div",null,$.a.createElement("b",null,"About me : "),e.profile.aboutMe||"information not found..."),$.a.createElement("div",null,$.a.createElement("b",null,"Open for interviews: "),e.profile.lookingForAJob?"Yes":"No"),$.a.createElement("div",null,$.a.createElement("b",null,"Github : "),e.profile.contacts.github||"information not found..."),$.a.createElement("div",null,$.a.createElement("b",null,"Twitter : "),e.profile.contacts.twitter||"information not found..."),$.a.createElement("div",null,$.a.createElement("b",null,"Instagram : "),e.profile.contacts.instagram||"information not found..."),$.a.createElement("div",null,$.a.createElement("b",null,"Facebook : "),e.profile.contacts.facebook||"information not found..."),$.a.createElement("div",null,$.a.createElement("b",null,"Vk : "),e.profile.contacts.vk||"information not found...")))))})),Ie=a(73),Ne=a.n(Ie),Fe=a(138),xe=a.n(Fe);var Te=$.a.memo((function(e){return $.a.createElement("div",null,$.a.createElement("div",{className:Ne.a.newPost},$.a.createElement("img",{className:Ne.a.userPhoto,src:xe.a,alt:""}),$.a.createElement("span",{className:Ne.a.post},e.post),$.a.createElement("button",{style:{marginLeft:"10px"},onClick:function(){return e.deletePost(e.idPost)}},"x")))})),Ue=a(47),De=a.n(Ue),Be=a(126),Ae=a(125),Le=a(72),Re=a(46),Me=a.n(Re),ze=function(e){var t=e.input,a=e.meta,n=e.el,r=Object(Le.a)(e,["input","meta","el"]),s=a.touched&&a.error;return $.a.createElement("div",{className:Me.a.formControl+" "+(s?Me.a.error:" ")},$.a.createElement("div",null,$.a.createElement(n,Object(o.a)(Object(o.a)({},t),r))),s&&$.a.createElement("span",null,a.error))},He=function(e){return $.a.createElement(ze,Object.assign({},e,{el:"textarea"}))},Ge=function(e){return $.a.createElement(ze,Object.assign({},e,{el:"input"}))};var We=Object(Be.a)({form:"addPost"})((function(e){return $.a.createElement("form",{onSubmit:e.handleSubmit,onKeyPress:function(t){return a=t.key,n=e.handleSubmit,"Enter"===a&&n();var a,n}},$.a.createElement("div",{className:De.a.textareaBlock},$.a.createElement(Ae.a,{className:De.a.textarea,component:He,placeholder:"Write a post...",name:"postText"}),$.a.createElement("button",{className:De.a.btnSend},"Add post")))})),Ke=$.a.memo((function(e){var t=Object(se.c)(),a=function(e){t({type:"DELETE_POST",postId:e})},n=e.postDataEl.map((function(e,t){return $.a.createElement(Te,{idPost:e.idPost,post:e.post,key:t,deletePost:a})}));return $.a.createElement("div",{className:De.a.posts},$.a.createElement(We,{onSubmit:function(t){e.addPost(t.postText),t.postText=""}}),$.a.createElement("div",{className:De.a.postsBlock},n))}));var Ve=Object(n.d)(Object(se.b)((function(e){return{postDataEl:e.profilePage.postData,newPost:e.profilePage.newPost}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",post:e}}(t))}}})),$.a.memo)(Ke);var Ye=$.a.memo((function(e){return $.a.createElement("div",{className:ve.a.profCont},$.a.createElement(ye,e),e.profile&&!e.currentUserId&&$.a.createElement(Ve,null))})),qe=function(e){return{isAuth:e.data.isAuth}},Je=function(e){return Object(se.b)(qe)((function(t){return t.isAuth?$.a.createElement(e,t):$.a.createElement(re.a,{to:"/Login"})}))},Ze=function(e){return e.profilePage.profile},Qe=function(e){return e.profilePage.profileStatus},Xe=function(e){return e.data.id},$e=function(e){return e.usersPage.items},et=function(e){return e.usersPage.pageSize},tt=function(e){return e.usersPage.totalCount},at=function(e){return e.usersPage.currentPage},nt=function(e){return e.usersPage.isFetching},rt=function(e){return e.usersPage.isFinished},ot=function(e){Object(Z.a)(a,e);var t=Object(Q.a)(a);function a(){return Object(q.a)(this,a),t.apply(this,arguments)}return Object(J.a)(a,[{key:"refreshUser",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authId)||this.props.history.push("/Login"),this.props.getProfile(e),this.props.getProfileStatus(e)}},{key:"componentDidMount",value:function(){this.refreshUser()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.userId!==e.match.params.userId&&(this.props.setUserProfile(null),this.refreshUser())}},{key:"componentWillUnmount",value:function(){this.props.setUserProfile(null)}},{key:"render",value:function(){return $.a.createElement(Ye,Object.assign({},this.props,{currentUserId:Number(this.props.match.params.userId)}))}}]),a}($.a.Component),st=Object(n.d)(Object(se.b)((function(e){return{profile:Ze(e),profileStatus:Qe(e),authId:Xe(e),usersPage:$e(e),isFinished:rt(e)}}),{savePhotoProfile:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e);case 2:0===(n=t.sent).data.resultCode&&(console.log(n.data.data),a(w(n.data.data.photos)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setUserProfile:S,getProfile:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(e);case 2:n=t.sent,a(S(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getProfileStatus:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:n=t.sent,a(k(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateProfileStatus:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e);case 2:0===(n=t.sent).data.resultCode&&a(k(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUnFollow:U,getFollow:D}),$.a.memo,Je,re.g)(ot),ct=function(e){return e.data.isAuth},it=Object(Be.a)({form:"login"})((function(e){return $.a.createElement("form",{onSubmit:e.handleSubmit,className:Me.a.loginBlock},$.a.createElement("h1",null,"Welcome"),$.a.createElement("div",null,$.a.createElement(Ae.a,{component:Ge,placeholder:"Email",name:"email"})),$.a.createElement("div",null,$.a.createElement(Ae.a,{component:Ge,placeholder:"Password",name:"password",type:"password"})),$.a.createElement("div",null,$.a.createElement("button",null,"Login")),e.error&&$.a.createElement("div",{className:Me.a.authError},e.error))})),ut=Object(n.d)(Object(se.b)((function(e){return{isAuth:ct(e)}}),{login:function(e,t,a){return function(){var n=Object(l.a)(u.a.mark((function n(r){var o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h(e,t,a);case 2:0===(o=n.sent).resultCode?r(R()):r(Object(B.a)("login",{_error:o.messages}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}),$.a.memo)((function(e){if(e.isAuth)return $.a.createElement(re.a,{to:"/profile"});return $.a.createElement("div",null,$.a.createElement(it,{onSubmit:function(t){console.log(t),e.login(t.email,t.password,t.rememberMe)}}))})),lt=a(29),mt=a.n(lt);var pt=$.a.memo((function(e){return $.a.createElement("div",{className:mt.a.name},$.a.createElement(oe.b,{to:"/Dialogs/"+e.dialogsId},e.name))}));var ft=$.a.memo((function(e){return $.a.createElement("div",{className:mt.a.message},e.message)}));var dt=Object(Be.a)({form:"message form"})((function(e){return $.a.createElement("form",{onSubmit:e.handleSubmit},$.a.createElement("div",null,$.a.createElement(Ae.a,{component:He,placeholder:"enter your message",name:"newMessageBody"}),$.a.createElement("button",null,"Send")))})),gt=function(e){return e.dialogPage.messagesData},_t=function(e){return e.dialogPage.dialogsData},ht=function(e){return e.dialogPage.newMessage};var Et=Object(n.d)(Object(se.b)((function(e){return{messagesData:gt(e),dialogsData:_t(e),newMessage:ht(e)}}),(function(e){return{addMessages:function(t){e({type:"ADD-MESSAGE",newMessageText:t})}}})),Je)((function(e){var t=e.dialogsData.map((function(e,t){return $.a.createElement(pt,{dialogsId:e.dialogsId,name:e.name,key:t})})),a=e.messagesData.map((function(e,t){return $.a.createElement(ft,{messageId:e.messageId,message:e.message,key:t})}));return e.isAuth?$.a.createElement("div",{className:mt.a.Dialogs},$.a.createElement("div",{className:mt.a.dialogsNames},t),$.a.createElement("div",{className:mt.a.Messages},a,$.a.createElement(dt,{onSubmit:function(t){e.addMessages(t.newMessageBody)}}))):$.a.createElement(re.a,{to:"/Login"})})),bt=a(20),vt=a.n(bt),Ot=$.a.memo((function(e){for(var t=Object(X.useState)(" "),a=Object(ke.a)(t,2),n=a[0],r=a[1],o=Math.ceil(e.totalUsersCount/e.pageSize),s=[],c=0;c<=o;c++)s.push(c);if(o>=10){var i=Number(n)>=s.length||Number(n)<=0,u=e.currentPage+1>=s.length||e.currentPage<=0;return $.a.createElement("div",{className:vt.a.pageS},$.a.createElement("div",{className:vt.a.pageSwitch},1!==e.currentPage&&$.a.createElement("button",{onClick:function(){e.onPageChanged(s[e.currentPage-1]),r(" ")}},"\u21d0...prev page "),$.a.createElement("div",null," ",e.currentPage," "),$.a.createElement("button",{disabled:u,onClick:function(){e.onPageChanged(s[e.currentPage+1]),r(" ")}}," next page...\u21d2")),$.a.createElement("div",{className:vt.a.changePage},$.a.createElement("span",null,"Change page: "),$.a.createElement("input",{type:"number",value:n,onChange:function(e){return r(e.currentTarget.value)},onKeyPress:function(t){"Enter"!==t.key||i||e.onPageChanged(Number(n))}}),$.a.createElement("button",{onClick:function(){e.onPageChanged(Number(n))},disabled:i},"\u21aa")),$.a.createElement("span",{className:vt.a.totalPage},"Total pages: ",s.length-1))}return $.a.createElement("div",{className:vt.a.pageS},0===e.currentPage&&s.map((function(t){return $.a.createElement("span",{onClick:function(){e.onPageChanged(t)},className:e.currentPage===t?vt.a.selectedPage:vt.a.page},t)})))}));function Pt(e){var t=e.user,a=Object(Le.a)(e,["user"]);return $.a.createElement("div",{key:t.id,className:vt.a.user},$.a.createElement(oe.b,{to:"/profile/"+t.id},$.a.createElement("div",null,t.name),$.a.createElement("img",{src:t.photos.small||Pe.a,alt:""})),$.a.createElement(Ce,{getUnFollow:a.getUnFollow,getFollow:a.getFollow,user:t,isFinished:a.isFinished}))}function jt(e){return $.a.createElement("div",{className:vt.a.usersPage},e.isFetching?$.a.createElement(Ee,null):$.a.createElement($.a.Fragment,null,$.a.createElement(Ot,{totalUsersCount:e.totalUsersCount,currentPage:e.currentPage,onPageChanged:e.onPageChanged,pageSize:e.pageSize}),$.a.createElement("div",{className:vt.a.usersBlock},e.usersPage.map((function(t){return $.a.createElement(Pt,{user:t,getUnFollow:e.getUnFollow,getFollow:e.getFollow,isFinished:e.isFinished})})))))}var St=function(e){Object(Z.a)(a,e);var t=Object(Q.a)(a);function a(){var e;Object(q.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.getUsers(t,e.props.pageSize)},e}return Object(J.a)(a,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){console.log("render");for(var e=Math.ceil(this.props.totalUsersCount/this.props.pageSize),t=[],a=1;a<=e;a++)t.push(a);return $.a.createElement($.a.Fragment,null,$.a.createElement(jt,Object.assign({onPageChanged:this.onPageChanged},this.props)))}}]),a}($.a.PureComponent);var kt=Object(n.d)(Object(se.b)((function(e){return{usersPage:$e(e),pageSize:et(e),totalUsersCount:tt(e),currentPage:at(e),isFetching:nt(e),isFinished:rt(e)}}),{setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},getUnFollow:U,getFollow:D,getUsers:function(e,t){return function(){var a=Object(l.a)(u.a.mark((function a(n){var r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(F(!0)),a.next=3,f(e,t);case 3:r=a.sent,n(F(!1)),n({type:"SET_USERS",items:r.items}),n({type:"SET_USERS_COUNT",totalCount:r.totalCount});case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}),$.a.memo)(St),wt=$.a.memo((function(){return $.a.createElement($.a.Fragment,null,$.a.createElement(re.b,{path:"/profile/:userId?",us:!0,render:function(){return $.a.createElement(st,null)}}),$.a.createElement(re.b,{path:"/login",render:function(){return $.a.createElement(ut,null)}}),$.a.createElement(re.b,{path:"/dialogs",render:function(){return $.a.createElement(Et,null)}}),$.a.createElement(re.b,{path:"/users",render:function(){return $.a.createElement(kt,null)}}))})),Ct=function(e){Object(Z.a)(a,e);var t=Object(Q.a)(a);function a(){return Object(q.a)(this,a),t.apply(this,arguments)}return Object(J.a)(a,[{key:"componentDidMount",value:function(){this.props.initialize()}},{key:"render",value:function(){return this.props.initialized?$.a.createElement("div",{className:te.a.appContainer},$.a.createElement("div",{className:te.a.circle1}," "),$.a.createElement("div",{className:te.a.circle2}," "),$.a.createElement("div",{className:te.a.appBlock},$.a.createElement("div",{className:te.a.navbar},$.a.createElement(ge,null)),$.a.createElement("div",{className:te.a.content},$.a.createElement(wt,null)))):$.a.createElement(Ee,null)}}]),a}($.a.Component),yt=Object(n.d)(Object(se.b)((function(e){return{initialized:e.app.initialized}}),{initialize:function(){return function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(R());case 2:return e.next=4,t({type:"INITIALIZED_SUCCEED"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),$.a.memo)(Ct);Y.a.render($.a.createElement(se.a,{store:K},$.a.createElement(oe.a,null,$.a.createElement(yt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},30:function(e,t,a){e.exports={nav:"navbar_nav__bAire",activeHover:"navbar_activeHover__3BgU_"}},34:function(e,t,a){e.exports={appContainer:"app_appContainer__jAaEk",circle1:"app_circle1__2-LhB",circle2:"app_circle2__2LcO1",appBlock:"app_appBlock__2QBn9",content:"app_content__A9kKb",navbar:"app_navbar__15VAa"}},46:function(e,t,a){e.exports={loginBlock:"formControl_loginBlock__DuFCq",formControl:"formControl_formControl__3IOTW",error:"formControl_error__2ko6l",authError:"formControl_authError__N-mvc"}},47:function(e,t,a){e.exports={posts:"Posts_posts__1m3bO",title:"Posts_title__1Nuiw",btnSend:"Posts_btnSend__PisfH",textarea:"Posts_textarea__3yNTT",textareaBlock:"Posts_textareaBlock__3YWpo",postsBlock:"Posts_postsBlock__3l8Lw"}},70:function(e,t,a){e.exports=a.p+"static/media/no_ava.6c9609f2.png"},73:function(e,t,a){e.exports={userPhoto:"newPosts_userPhoto__2seCu",newPost:"newPosts_newPost__3ziVk",post:"newPosts_post___suLd",postLike:"newPosts_postLike__3HXvr"}}},[[165,1,2]]]);
//# sourceMappingURL=main.11677f46.chunk.js.map